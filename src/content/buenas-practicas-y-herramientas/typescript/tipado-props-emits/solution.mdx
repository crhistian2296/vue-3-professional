## Solución: tipando props y emits en `<script setup lang="ts">`

A continuación tienes varias formas comunes y correctas de tipar `ref`, `props` y `emits` en componentes Vue 3 con TypeScript.

### 1) `ref` con tipos unión

```ts
// resulting type: Ref<string | number>
import { ref, type Ref } from 'vue'

const year: Ref<string | number> = ref<string | number>('2020')

year.value = 2020 // ok!
```

### 2) Props usando genéricos inline

```vue
<script setup lang="ts">
const props = defineProps<{
  foo: string
  bar?: number
}>()
</script>
```

### 3) Props con interfaz + valores por defecto (desestructuración)

```ts
interface Props {
  msg?: string
  labels?: string[]
}

const { msg = 'hello', labels = ['one', 'two'] } = defineProps<Props>()
```

Alternativa con `withDefaults`:

```ts
interface Props {
  msg?: string
  labels?: string[]
}

const props = withDefaults(defineProps<Props>(), {
  msg: 'hello',
  labels: () => ['one', 'two'],
})
```

### 4) Emits tipados con tuplas

```vue
<script setup lang="ts">
const emit = defineEmits<{
  change: [id: number]
  update: [value: string]
}>()
</script>
```

---

## Componente final de ejemplo

```vue
<template>
  <div class="space-y-3">
    <div class="flex gap-2 items-center">
      <span class="text-sm text-muted-foreground">Foo:</span>
      <span class="px-2 py-1 bg-gray-100 rounded">{{ foo }}</span>
      <span class="text-sm text-muted-foreground ml-4">Bar:</span>
      <span class="px-2 py-1 bg-gray-100 rounded">{{ bar ?? '—' }}</span>
    </div>

    <div class="flex gap-2">
      <button class="px-3 py-1.5 text-sm rounded bg-blue-600 text-white" @click="emit('change', 1)">
        Emit change(1)
      </button>
      <button class="px-3 py-1.5 text-sm rounded bg-emerald-600 text-white" @click="emit('update', input)">
        Emit update(input)
      </button>
      <input v-model="input" class="px-2 py-1 border rounded" placeholder="nuevo valor" />
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'

// 1) Props tipadas inline
const { foo, bar } = defineProps<{
  foo: string
  bar?: number
}>()

// 2) Emits tipados con tuplas
const emit = defineEmits<{
  change: [id: number]
  update: [value: string]
}>()

// 3) Ref con tipo inferido (string)
const input = ref('2020')
</script>
```

Puntos clave:

- `defineProps<T>()` y `defineEmits<T>()` activan el chequeo estático y el autocompletado.
- Para defaults de props puedes desestructurar con valores o usar `withDefaults`.
- Usar tuplas en `defineEmits` permite tipar fácilmente la lista de parámetros de cada evento.
